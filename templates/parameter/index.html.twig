{% extends 'base.html.twig' %}

{% block title %}Hello ParameterController!{% endblock %}

{% block body %}


<section class="parameter_landing">
  <h1>Liste des parametres</h1>
  {# Afficher le formulaire pour créer un nouveau paramètre #}
    {{ form_start(form) }}
        {{ form_widget(form) }}
        <button type="submit" class="parameter_create" >Créer un paramètre</button>
    {{ form_end(form) }}


    <form id="searchForm" method="POST">
      <input type="text" id="searchInput" name="search_term" placeholder="Rechercher un paramètre">
      <button type="submit">Rechercher</button>
  </form>
<!-- Zone pour afficher les résultats -->
<div id="parametersContainer">
  {% for parameter in parameters %}
      <div class="parameter-item">
          <h3>{{ parameter.paramKey }}</h3>
          <p>{{ parameter.paramValue }}</p>
      </div>
  {% endfor %}
</div>
    <table>
      <thead>
        <tr>
          <th>Clée</th>
          <th>Valeur</th>
          <th>DateDebut</th>
          <th>DateFin</th>
          <th>Utilisateur</th>
        </tr>
      </thead>
      <tbody>
        {% for parameter in parameters %}
        <tr>
         <td>{{ parameter.paramKey }}</td>
        <td>{{ parameter.paramValue }}</td>
        <td>{{ parameter.paramDateFrom|date('Y-m-d') }}</td>
        <td>{{ parameter.paramDateTo|date('Y-m-d') }}</td>
        <td>{{ parameter.paramUser }}</td>
        <td>
                {# Formulaire pour modifier le paramètre #}
                 {{ form_start(parameter.editForm) }}
                    {{ form_widget(parameter.editForm) }} {# Ceci inclura le champ caché pour l'ID #}
                    <button type="submit" class="btn btn-primary">Modifier</button>
                {{ form_end(parameter.editForm) }}
                
                {# Formulaire pour supprimer le paramètre #}
                {{ form_start(parameter.deleteForm) }}
                    <button type="submit">Supprimer</button>
                {{ form_end(parameter.deleteForm) }}
            </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
</section>
    
  
{% endblock %}
